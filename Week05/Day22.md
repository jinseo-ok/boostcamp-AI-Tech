# Week05 - Graph

## [Day 22] - 페이지랭크 & 전파 모델

### 1. 검색 엔진에서의 그래프 활용

이번 강의에서는 페이지랭크, PageRank 알고리즘에 대해 배웁니다.

인터넷에는 인터넷 페이지가 무수히 많습니다. 그리고 네이버, 구글 등의 검색엔진에서는 키워드에 대한 적합한 결과를 페이지로 보여주게 됩니다. 검색엔진이 결과를 보여주고 우선순위를 결정하는 방법은 단순하지 않습니다.

이번 강의에서는 구굴의 검색 알고리즘인 페이지랭크 알고리즘을 배우게 됩니다. 그리고 페이지랭크 알고리즘에서 발생할 수 있는 문제점과 이를 해결할 수 있는 알고리즘을 배우게 됩니다.

#### 1) 웹과 그래프

웹은 **웹페이지**와 **하이퍼링크**로 구성된 **거대한 방향 그래프**입니다. 즉, 웹페이지는 정점에 해당하며 웹페이지가 포함하는 하이퍼링크는 해당 웹페이지에서 다음 웹페이지로 향하는 간선에 해당합니다. 이 때, 웹페이지는 추가적으로 키워드 정보를 포함하고 있습니다.

웹의 규모가 커짐에 따라 사용자에게 웹페이지를 보여주는 방식의 변화가 필요했습니다. 첫번째 방법으로는 웹페이지의 디렉토리를 설정하여 카테고리화로 정리하는 것이었습니다. 하지만 웹페이지 자체가 무한정으로 증가하다보니 카테고리 구분이 모호한 경우가 발생하였고 단순히 분류하는 문제가 효율성을 불러올 수 없었습니다. 두번째는 키워드에 따른 웹페이지를 출력하는 방법입니다. 사용자가 입력한 키워드에 해당하는 결과물을 보여주는 방법이지만 페이지 노출을 위해 악의적으로 키워드를 삽입한 경우에 예상치 못한 결과가 나올 수 있습니다.

그렇기 때문에 웹의 규모가 계속해서 폭증하고 있는 상황에서, 사용자 키워드와 관련성이 높고 신뢰할 수 있는 웹페이지를 찾는 알고리즘이 요구되었습니다.

#### 2) 페이지랭크

구글의 창업자인 래리 페이지와 세르게이 브린은 ***The PageRank Citation Ranking: Bringing Order to the Web*** 이라는 논문을 통해 사용자의 키워드와 관련성이 높고 신뢰할 수 있는 웹페이지를 출력하는 알고리즘에 대해 제안합니다.

페이지랭크 알고리즘의 핵심 아이디어는 **투표**입니다. 투표를 통해 사용자 키워드와 관련성이 높고 신뢰할 수 있는 웹페이지를 찾게 됩니다. 투표가 이뤄지는 방식은 웹페이지(노드)가 다른 웹페이지(노드)로의 방향 하이퍼링크(간선)를 가지게 되면 투표했다고 볼 수 있습니다. 즉, 들어오는 간선이 많을 수록 신뢰할 수 있다는 의미를 가지게 됩니다. 예를 들어, 사람들은 많이 인용된 논문을 보다 신뢰하는 경향이 있습니다.

하지만 들어오는 간선의 수만으로 해당 웹페이지의 신뢰도를 단순하게 판단할 수 없습니다. 악의적인 목적으로 간선의 수를 임의로 늘릴 수 있기 때문입니다.

페이지링크에서는 이러한 단점을 보완하기 위해서 **가중 투표** 를 적용합니다. 관련성이 높고 신뢰할 수 있는 웹사이트의 투표를 더 중요하게 간주하고 그렇지 않은 웹사이트의 투표의 가중치를 낮춰 합리적인 투표 결과를 유도합니다.

**투표 관점**

측정하려는 웹페이지의 관련성 및 신뢰도를 **페이지랭크 점수**라고 합니다. 각 웹페이지는 각각의 나가는 이웃에게 다음과 가중치로 투표를 진행합니다.

$$\frac {자신의 페이지랭크 점수}{나가는 이웃의 수}$$

아래 예시에서 웹페이지 j는 웹페이지 x, y, z에게 각각 $\frac {r_{j}}{3}$ 만큼의 가중치로 투표를 진행합니다. 여기서 $r_{j}$는 웹페이지 j의 페이지랭크 점수를 의미합니다.

<center>
<image src = https://user-images.githubusercontent.com/48677363/109111174-c7b2d200-777b-11eb-8ca0-074ca3fdd1e4.png width = 200>
</center>

웹페이지의 페이지랭크 점수는 해당 웹페이지가 받은 가중치 합으로 정의되기에 $r_{j}$를 $r_{j} = r_{i} / 3 + r_{k} / 4$ 로  계산할 수 있습니다. 그리고 페이지랭크 점수를 다음과 같이 정의할 수 있습니다.

$$\sum_{i\in N_{in}(j)} \frac {r_{i}}{d_{out}(i)}$$

**임의 보행(Random Walk) 관점**

웹을 이동하는 대상이라고 가정한다면 현재 웹페이지와 연결되어 있는 다른 웹페이지를 균일한 확률로 이동하게 됩니다.

t번째 방문한 웹페이지가 웹페이지 i일 확률을 $p_{i}(t)$라고 한다면 $p(t)$의 길이는 웹페이지 수(노드의 수)와 같은 확률분포 벡터가 됩니다. 그렇다면 t+1번째 방문한 웹페이지 j일 확률을




---------

### 2. 바이럴 마케팅에서의 그래프 활용